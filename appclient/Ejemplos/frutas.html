<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>frutas</title>
  </head>
  <body>
    <!-- 
        Anexo Actividad 7
      
        Crear una página dentro de la carpeta actividades “frutas.html”.
        Dado el array de frutas en formato Json que tenemos en el anexo de este documento, 
        conseguir los siguientes objetivos usando: map, filter, reduce
        
        •	Array solo con nombres de frutas ( map )
        •	Array solo con nombres de frutas que están en oferta ( map + filter )
        •	Precio TOTAL de todas las frutas ( map + reduce )
        •	Precio TOTAL de todas las frutas, pero aplicando el descuento si están en oferta ( map, filter, reduce )
        •	Array solo con los colores de las frutas 
        •	Array solo con los colores de las frutas SIN REPETICIÓN

     -->

    <script>
      window.addEventListener("load", init());

      function init() {
        console.debug("Document Load and Ready");

        const frutas = [
          {
            nombre: "fresa",
            precio: 4.56,
            oferta: true,
            descuento: 50,
            colores: ["rojo"],
          },
          {
            nombre: "manzana",
            precio: 1.99,
            oferta: false,
            descuento: 50,
            colores: ["rojo", "verde", "amarillo"],
          },
          {
            nombre: "kiwi",
            precio: 3.0,
            oferta: false,
            descuento: 10,
            colores: ["verde", "amarillo"],
          },
        ];

        console.log("*** Primera llamada al Array frutas ***");
        console.log(frutas);

        // Array solo con nombres de frutas ( map )

        const frutasNombres = frutas.map(f => f.nombre);

        console.log("*** Array solo con nombres de frutas ( map ) ***");
        console.log(frutasNombres);

        // Array solo con nombres de frutas que están en oferta ( map + filter )
        const ofertasFrutas = frutas.filter((fruta) => fruta.oferta == true );

        console.log("*** Array solo con nombres de frutas que están en oferta ( map + filter )***");
        console.log(ofertasFrutas);

        const frutasOfertas = frutas
                    .map(f => f.nombre)
                    .filter(f => {
            return f.oferta == true;
        });

        console.log('opcion 2 oferta (luego lo miro)', frutasOfertas);
        console.log(frutasOfertas);

        // Precio TOTAL de todas las frutas ( map + reduce )

        const precioTotal = frutas
                    .map(f => f.precio)
                    .reduce((p, c) => p + c, 0);

        console.log("*** Precio TOTAL de todas las frutas ( map + reduce ) ***");
        console.log(precioTotal);

        /* 
        Precio TOTAL de todas las frutas, pero aplicando el descuento si están en oferta 
        ( map, filter, reduce )
        */
    
        const precioTotalDescuento = frutas
                .map(f => (f.oferta) ? f.precio - (f.precio * f.descuento /100 ): f.precio )
                .reduce((p, c) => p + c, 0); 

        console.log("*** Precio TOTAL, con descuento si están en oferta ( map, filter, reduce ): ***");
        console.log(precioTotalDescuento);
        


        /* Array solo con los colores de las frutas */

       

        const colores = frutas
                .map(f => f.colores)
                .reduce((p,c,i,a) => {
                    const resultado = p.concat(c);
                    return resultado;
                });

        console.log('*** Array solo con los colores de las frutas ***');
        console.log(colores);

        /* Array solo con los colores de las frutas SIN REPETICIÓN */
        const coloresNoRepe =  [...new Set(
            frutas
                .map(f => f.colores)
                .reduce((p,c,i,a) => {
                    const resultado = p.concat(c);
                    return resultado;
                })
                )];

        console.log('Colores de las frutas SIN REPETICIÓN');
        console.log(coloresNoRepe);






      }
    </script>
  </body>
</html>
